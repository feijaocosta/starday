!function n(o,i,r){function a(t,e){if(!i[t]){if(!o[t]){var s="function"==typeof require&&require;if(!e&&s)return s(t,!0);if(l)return l(t,!0);throw(e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",e}s=i[t]={exports:{}},o[t][0].call(s.exports,function(e){return a(o[t][1][e]||e)},s,s.exports,n,o,i,r)}return i[t].exports}for(var l="function"==typeof require&&require,e=0;e<r.length;e++)a(r[e]);return a}({1:[function(e,s,n){"use strict";var a=e("../components/Repeater"),l=e("../components/ShortcodeAtts"),d=e("../components/CarouselArgs"),p=e("../components/DesignOptions");const h=wp.i18n["__"],t=wp.blocks["registerBlockType"],c=wp.editor["InspectorControls"],g=wp.element["Fragment"],{ServerSideRender:v,Disabled:C,PanelBody:m,TextControl:u,SelectControl:f}=wp.components;t("vodi/section-playlist-carousel",{title:h("Vodi Section Playlists Carousel","vodi-extensions"),icon:"editor-kitchensink",category:"vodi-blocks",edit:e=>{const{attributes:t,setAttributes:n}=e,{section_title:s,tab_args:o,carousel_args:i,design_options:r}=t;return wp.element.createElement(g,null,wp.element.createElement(c,null,wp.element.createElement(u,{label:h("Section Title","vodi-extensions"),value:s,onChange:e=>{n({section_title:e})}}),wp.element.createElement(a.Repeater,{title:h("Playlist Tabs","vodi-extensions"),values:o?JSON.parse(o):[],defaultValues:{tab_title:"",post_type:"movie_playlists",shortcode_atts:{limit:10}},updateValues:e=>{n({tab_args:JSON.stringify([...e])})}},wp.element.createElement(u,{label:h("Tab Title","vodi-extensions"),name:"tab_title",valuekey:"value",value:"",trigger_method_name:"onChange",onChange:(e,t)=>{var s=JSON.parse(o);s[t].tab_title=e,n({tab_args:JSON.stringify([...s])})}}),wp.element.createElement(f,{label:h("Post Type","vodi-extensions"),name:"post_type",valuekey:"value",value:"",options:[{label:h("Movie Playlist","vodi-extensions"),value:"movie_playlists"},{label:h("Video Playlist","vodi-extensions"),value:"video_playlists"},{label:h("TV Show Playlist","vodi-extensions"),value:"tv_show_playlists"}],trigger_method_name:"onChange",onChange:(e,t)=>{var s=JSON.parse(o);s[t].post_type=e,n({tab_args:JSON.stringify([...s])})}}),wp.element.createElement(l.ShortcodeAtts,{postType:post_type,hideFields:["columns","ids","category","tag","featured","top_rated"],name:"shortcode_atts",valuekey:"attributes",attributes:{},trigger_method_name:"updateShortcodeAtts",updateShortcodeAtts:(e,t)=>{var s=JSON.parse(o);s[t].shortcode_atts={...s[t].shortcode_atts,...e},n({tab_args:JSON.stringify([...s])})}})),wp.element.createElement(m,{title:h("Carousel Args","vodi-extensions"),initialOpen:!0},wp.element.createElement(d.CarouselArgs,{attributes:{...i},updateCarouselArgs:e=>{n({carousel_args:{...i,...e}})}})),wp.element.createElement(m,{title:h("Design Options","vodi-extensions"),initialOpen:!1},wp.element.createElement(p.DesignOptions,{attributes:{...r},updateDesignOptions:e=>{n({design_options:{...r,...e}})}}))),wp.element.createElement(C,null,o?wp.element.createElement(v,{block:"vodi/section-playlist-carousel",attributes:t}):h("Add Tab","vodi-extensions")))},save(){return null}})},{"../components/CarouselArgs":2,"../components/DesignOptions":3,"../components/Repeater":7,"../components/ShortcodeAtts":8}],2:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.CarouselArgs=void 0;const r=wp.i18n["__"];var n=wp.element["Component"];const{RangeControl:a,CheckboxControl:l}=wp.components;class o extends n{constructor(e){super(...arguments),this.props=e,this.onChangeSlidesToShow=this.onChangeSlidesToShow.bind(this),this.onChangeSlidesToScroll=this.onChangeSlidesToScroll.bind(this),this.onChangeDots=this.onChangeDots.bind(this),this.onChangeArrows=this.onChangeArrows.bind(this),this.onChangeAutoplay=this.onChangeAutoplay.bind(this),this.onChangeInfinite=this.onChangeInfinite.bind(this)}onChangeSlidesToShow(e){this.props.updateCarouselArgs({slidesToShow:e})}onChangeSlidesToScroll(e){this.props.updateCarouselArgs({slidesToScroll:e})}onChangeDots(e){this.props.updateCarouselArgs({dots:e})}onChangeArrows(e){this.props.updateCarouselArgs({arrows:e})}onChangeAutoplay(e){this.props.updateCarouselArgs({autoplay:e})}onChangeInfinite(e){this.props.updateCarouselArgs({infinite:e})}render(){var e=this.props["attributes"],{slidesToShow:e,slidesToScroll:t,dots:s,arrows:n,autoplay:o,infinite:i}=e;return wp.element.createElement("div",null,wp.element.createElement(a,{label:r("Slide To Show","vodi-extensions"),value:e,onChange:this.onChangeSlidesToShow,min:1,max:8}),wp.element.createElement(a,{label:r("Slides To Scroll","vodi-extensions"),value:t,onChange:this.onChangeSlidesToScroll,min:1,max:8}),wp.element.createElement(l,{label:r("Dots","vodi-extensions"),help:r("Check to show carousel dots.","vodi-extensions"),checked:s,onChange:this.onChangeDots}),wp.element.createElement(l,{label:r("Arrows","vodi-extensions"),help:r("Check to show carousel arrows.","vodi-extensions"),checked:n,onChange:this.onChangeArrows}),wp.element.createElement(l,{label:r("Autoplay","vodi-extensions"),help:r("Check to autoplay carousel.","vodi-extensions"),checked:o,onChange:this.onChangeAutoplay}),wp.element.createElement(l,{label:r("Infinite Scroll","vodi-extensions"),help:r("Check to infinite scroll carousel.","vodi-extensions"),checked:i,onChange:this.onChangeInfinite}))}}s.CarouselArgs=o},{}],3:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.DesignOptions=void 0;const r=wp.i18n["__"];var n=wp.element["Component"];const a=wp.components["RangeControl"];class o extends n{constructor(e){super(...arguments),this.props=e,this.onChangePaddingTop=this.onChangePaddingTop.bind(this),this.onChangePaddingBottom=this.onChangePaddingBottom.bind(this),this.onChangePaddingLeft=this.onChangePaddingLeft.bind(this),this.onChangePaddingRight=this.onChangePaddingRight.bind(this),this.onChangeMarginTop=this.onChangeMarginTop.bind(this),this.onChangeMarginBottom=this.onChangeMarginBottom.bind(this)}onChangePaddingTop(e){this.props.updateDesignOptions({padding_top:e})}onChangePaddingBottom(e){this.props.updateDesignOptions({padding_bottom:e})}onChangePaddingLeft(e){this.props.updateDesignOptions({padding_left:e})}onChangePaddingRight(e){this.props.updateDesignOptions({padding_right:e})}onChangeMarginTop(e){this.props.updateDesignOptions({margin_top:e})}onChangeMarginBottom(e){this.props.updateDesignOptions({margin_bottom:e})}render(){var e=this.props["attributes"],{padding_top:e,padding_bottom:t,padding_left:s,padding_right:n,margin_top:o,margin_bottom:i}=e;return wp.element.createElement("div",null,wp.element.createElement(a,{label:r("Padding Top (px)","vodi-extensions"),value:e,onChange:this.onChangePaddingTop,min:0,max:100}),wp.element.createElement(a,{label:r("Padding Bottom (px)","vodi-extensions"),value:t,onChange:this.onChangePaddingBottom,min:0,max:100}),wp.element.createElement(a,{label:r("Padding Left (px)","vodi-extensions"),value:s,onChange:this.onChangePaddingLeft,min:0,max:100}),wp.element.createElement(a,{label:r("Padding Right (px)","vodi-extensions"),value:n,onChange:this.onChangePaddingRight,min:0,max:100}),wp.element.createElement(a,{label:r("Margin Top (px)","vodi-extensions"),value:o,onChange:this.onChangeMarginTop,min:-100,max:100}),wp.element.createElement(a,{label:r("Margin Bottom (px)","vodi-extensions"),value:i,onChange:this.onChangeMarginBottom,min:-100,max:100}))}}s.DesignOptions=o},{}],4:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.Item=void 0;s.Item=e=>{let{title:{rendered:t}={},name:s,clickHandler:n,id:o,icon:i}=e;return wp.element.createElement("article",{className:"item"},wp.element.createElement("div",{className:"item-body"},wp.element.createElement("h3",{className:"item-title",style:{marginTop:"0"}},t,s)),wp.element.createElement("button",{onClick:()=>n(o)},i))}},{}],5:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.ItemList=void 0;var r=e("./Item");function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s,n=arguments[t];for(s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e}).apply(this,arguments)}const l=wp.i18n["__"];s.ItemList=e=>{const{filtered:t=!1,loading:s=!1,items:n=[],action:o=()=>{},icon:i=null}=e;return s?wp.element.createElement("p",{className:"loading-items"},l("Loading ...","vodi-extensions")):t&&n.length<1?wp.element.createElement("div",{className:"item-list"},wp.element.createElement("p",null,l("Your query yielded no results, please try again.","vodi-extensions"))):!n||n.length<1?wp.element.createElement("p",{className:"no-items"},l("Not found.","vodi-extensions")):wp.element.createElement("div",{className:"item-list"},n.map(e=>wp.element.createElement(r.Item,a({key:e.id},e,{clickHandler:o,icon:i}))))}},{"./Item":4}],6:[function(e,d,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PostSelector=void 0;var o=e("./ItemList"),n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};t=r(t);if(t&&t.has(e))return t.get(e);var s,n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(s in e){var i;"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&((i=o?Object.getOwnPropertyDescriptor(e,s):null)&&(i.get||i.set)?Object.defineProperty(n,s,i):n[s]=e[s])}n.default=e,t&&t.set(e,n);return n}(e("../utils/api")),i=e("../utils/useful-funcs");function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,s=new WeakMap;return(r=function(e){return e?s:t})(e)}const a=wp.i18n["__"],l=wp.components["Icon"];e=wp.element.Component;class s extends e{constructor(e){super(...arguments),this.props=e,this.state={posts:[],loading:!1,type:e.postType||"post",types:[],filter:"",filterLoading:!1,filterPosts:[],initialLoading:!1,selectedPosts:[]},this.addPost=this.addPost.bind(this),this.removePost=this.removePost.bind(this),this.handleInputFilterChange=this.handleInputFilterChange.bind(this),this.doPostFilter=(0,i.debounce)(this.doPostFilter.bind(this),300),this.getSelectedPostIds=this.getSelectedPostIds.bind(this),this.getSelectedPosts=this.getSelectedPosts.bind(this)}componentDidMount(){this.setState({initialLoading:!0}),n.getPostTypes().then(e=>{this.setState({types:e},()=>{this.retrieveSelectedPosts().then(e=>{e?this.setState({initialLoading:!1,selectedPosts:e}):this.setState({initialLoading:!1})})})})}getPosts(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};const t=this.getSelectedPostIds(),s={...{per_page:10,type:this.state.type,search:this.state.filter},...e};return s.restBase=this.state.types[this.state.type].rest_base,n.getPosts(s).then(e=>(s.search?this.setState({filterPosts:e.filter(e=>{e=e.id;return-1===t.indexOf(e)})}):this.setState({posts:(0,i.uniqueById)([...this.state.posts,...e])}),e))}getSelectedPostIds(){const e=this.props["selectedPostIds"];return e?Array.isArray(e)?e:e.split(","):[]}getSelectedPosts(s){const e=(0,i.uniqueById)([...this.state.filterPosts,...this.state.posts]);var t=e.filter(e=>{e=e.id;return-1!==s.indexOf(e)}).sort((e,t)=>{e=s.indexOf(e.id),t=s.indexOf(t.id);return t<e?1:e<t?-1:0});this.setState({selectedPosts:t})}retrieveSelectedPosts(){var e=this.props["postType"],{}=this.state,t=this.getSelectedPostIds().join(",");if(!t)return new Promise(e=>e());let s={include:t,per_page:100,postType:e};return this.props.postStatus&&(s.status=this.props.postStatus),this.getPosts({...s})}addPost(t){var e;this.state.filter&&(e=this.state.filterPosts.filter(e=>e.id===t),e=(0,i.uniqueById)([...this.state.posts,...e]),this.setState({posts:e})),this.props.selectSingle?(this.props.updateSelectedPostIds(e=[t]),this.getSelectedPosts(e)):(e=[...this.getSelectedPostIds(),t],this.props.updateSelectedPostIds(e),this.getSelectedPosts(e))}removePost(t){var e=[...this.getSelectedPostIds()].filter(e=>e!==t);this.props.updateSelectedPostIds(e),this.getSelectedPosts(e)}handleInputFilterChange(){let{target:{value:e=""}={}}=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.setState({filter:e},()=>{if(!e)return this.setState({filteredPosts:[],filtering:!1});this.doPostFilter()})}doPostFilter(){var{filter:e=""}=this.state;if(e){this.setState({filtering:!0,filterLoading:!0});let e={};this.props.postStatus&&(e.status=this.props.postStatus),this.getPosts({...e}).then(()=>{this.setState({filterLoading:!1})})}}render(){var e=this.state.filtering&&!this.state.filterLoading?this.state.filterPosts:[],t=wp.element.createElement(l,{icon:"plus"}),s=wp.element.createElement(l,{icon:"minus"}),n="searchinput-"+Math.random().toString(36).substr(2,16);return wp.element.createElement("div",{className:"components-base-control components-post-selector"},wp.element.createElement("div",{className:"components-base-control__field--selected"},wp.element.createElement("h2",null,a("Search Post","vodi-extensions")),wp.element.createElement(o.ItemList,{items:[...this.state.selectedPosts],loading:this.state.initialLoading,action:this.removePost,icon:s})),wp.element.createElement("div",{className:"components-base-control__field"},wp.element.createElement("label",{htmlFor:n,className:"components-base-control__label"},wp.element.createElement(l,{icon:"search"})),wp.element.createElement("input",{className:"components-text-control__input",id:n,type:"search",placeholder:a("Please enter your search query...","vodi-extensions"),value:this.state.filter,onChange:this.handleInputFilterChange}),wp.element.createElement(o.ItemList,{items:e,loading:this.state.initialLoading||this.state.loading||this.state.filterLoading,filtered:this.state.filtering,action:this.addPost,icon:t})))}}t.PostSelector=s},{"../utils/api":10,"../utils/useful-funcs":11,"./ItemList":5}],7:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.Repeater=void 0;var{}=wp.i18n;const{Component:n,Children:a}=wp.element,{Panel:l,Button:o,Icon:i}=wp.components;class r extends n{constructor(e){super(...arguments),this.props=e,this.renderAddButton=this.renderAddButton.bind(this),this.renderRemoveButton=this.renderRemoveButton.bind(this),this.handleAdd=this.handleAdd.bind(this),this.handleRemove=this.handleRemove.bind(this),this.renderChildrenElements=this.renderChildrenElements.bind(this)}renderAddButton(){return wp.element.createElement(o,{isDefault:!0,className:"button-fullwidth",onClick:this.handleAdd},wp.element.createElement(i,{icon:"plus"}))}renderRemoveButton(){return wp.element.createElement(o,{isDestructive:!0,className:"button-remove",onClick:this.handleRemove},wp.element.createElement(i,{icon:"dismiss"}))}handleAdd(){const{defaultValues:e,updateValues:t}=this.props;var s=this.props["values"],s=s?[...s,{...e}]:[{...e}];t(s)}handleRemove(s){const e=this.props["updateValues"],t=this.props["values"];var n=t.filter((e,t)=>t!=s);e(n)}renderChildrenElements(){const o=this.props["children"],i=this.props["values"];if(!i)return[];const r=this.renderRemoveButton();return i.map((e,s)=>{var t=a.map(o,t=>{let e={...t.props};return i[s][t.props.name]&&(e[t.props.valuekey]=i[s][t.props.name]),e[t.props.trigger_method_name]=e=>t.props[t.props.trigger_method_name](e,s),React.cloneElement(t,{...e})}),n=React.cloneElement(r,{key:"repeater-remove-"+s,onClick:()=>r.props.onClick(s)});return React.createElement(l,{key:"repeater-child-"+s},[t,n])})}render(){return wp.element.createElement("div",{className:"components-base-control repeater-component"},wp.element.createElement("div",{className:"components-base-control__field"},wp.element.createElement("label",{className:"components-base-control__label"},this.props.title),this.renderChildrenElements(),this.renderAddButton()))}}s.Repeater=r},{}],8:[function(e,n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShortcodeAtts=void 0;var y=e("./PostSelector"),w=e("./TermSelector");const S=wp.i18n["__"];e=wp.element.Component;const{RangeControl:_,SelectControl:T,CheckboxControl:x}=wp.components,P=wp.hooks["applyFilters"];class s extends e{constructor(e){super(...arguments),this.props=e,this.onChangeLimit=this.onChangeLimit.bind(this),this.onChangeColumns=this.onChangeColumns.bind(this),this.onChangeOrderby=this.onChangeOrderby.bind(this),this.onChangeOrder=this.onChangeOrder.bind(this),this.onChangeIds=this.onChangeIds.bind(this),this.onChangeCategory=this.onChangeCategory.bind(this),this.onChangeGenre=this.onChangeGenre.bind(this),this.onChangeTag=this.onChangeTag.bind(this),this.onChangeFeatured=this.onChangeFeatured.bind(this),this.onChangeTopRated=this.onChangeTopRated.bind(this)}onChangeLimit(e){this.props.updateShortcodeAtts({limit:e})}onChangeColumns(e){this.props.updateShortcodeAtts({columns:e})}onChangeOrderby(e){this.props.updateShortcodeAtts({orderby:e})}onChangeOrder(e){this.props.updateShortcodeAtts({order:e})}onChangeIds(e){this.props.updateShortcodeAtts({ids:e.join(",")})}onChangeCategory(e){this.props.updateShortcodeAtts({category:e.join(",")})}onChangeGenre(e){this.props.updateShortcodeAtts({genre:e.join(",")})}onChangeTag(e){this.props.updateShortcodeAtts({tag:e.join(",")})}onChangeFeatured(e){this.props.updateShortcodeAtts({featured:e})}onChangeTopRated(e){this.props.updateShortcodeAtts({top_rated:e})}render(){const{attributes:e,postType:t,postStatus:s,catTaxonomy:n,tagTaxonomy:o,minLimit:p=1,maxLimit:h=20,minColumns:c=1,maxColumns:m=6,hideFields:i}=this.props,{limit:u,columns:g,orderby:v,order:C,ids:r,category:a,genre:l,tag:d,featured:f,top_rated:b}=e;return wp.element.createElement("div",null,i&&i.includes("limit")?"":wp.element.createElement(_,{label:S("Limit","vodi-extensions"),value:u,onChange:this.onChangeLimit,min:P("vodi.component.shortcodeAtts.limit.min",p),max:P("vodi.component.shortcodeAtts.limit.max",h)}),i&&i.includes("columns")?"":wp.element.createElement(_,{label:S("Columns","vodi-extensions"),value:g,onChange:this.onChangeColumns,min:P("vodi.component.shortcodeAtts.columns.min",c),max:P("vodi.component.shortcodeAtts.columns.max",m)}),i&&i.includes("orderby")?"":wp.element.createElement(T,{label:S("Orderby","vodi-extensions"),value:v,options:P("vodi.component.shortcodeAtts.orderby.options",[{label:S("Title","vodi-extensions"),value:"title"},{label:S("Date","vodi-extensions"),value:"movie"===t?"release_date":"date"},{label:S("ID","vodi-extensions"),value:"id"},{label:S("Random","vodi-extensions"),value:"rand"}],this.props),onChange:this.onChangeOrderby}),i&&i.includes("order")?"":wp.element.createElement(T,{label:S("Order","vodi-extensions"),value:C,options:P("vodi.component.shortcodeAtts.order.options",[{label:S("ASC","vodi-extensions"),value:"ASC"},{label:S("DESC","vodi-extensions"),value:"DESC"}],this.props),onChange:this.onChangeOrder}),i&&i.includes("ids")?"":wp.element.createElement(y.PostSelector,{postType:t,postStatus:s,selectedPostIds:r?r.split(",").map(Number):[],updateSelectedPostIds:this.onChangeIds}),"video"!==t||!n||i&&i.includes("category")?!n||i&&i.includes("genre")?"":wp.element.createElement(w.TermSelector,{postType:t,taxonomy:n,title:S("Search Genre","vodi-extensions"),selectedTermIds:l?l.split(",").map(Number):[],updateSelectedTermIds:this.onChangeGenre}):wp.element.createElement(w.TermSelector,{postType:t,taxonomy:n,title:S("Search Category","vodi-extensions"),selectedTermIds:a?a.split(",").map(Number):[],updateSelectedTermIds:this.onChangeCategory}),i&&i.includes("tag")?"":wp.element.createElement(w.TermSelector,{postType:t,taxonomy:o,title:S("Search Tag","vodi-extensions"),selectedTermIds:d?d.split(",").map(Number):[],updateSelectedTermIds:this.onChangeTag}),i&&i.includes("featured")?"":wp.element.createElement(x,{label:S("Featured","vodi-extensions"),help:S("Check to select featured posts.","vodi-extensions"),checked:f,onChange:this.onChangeFeatured}),i&&i.includes("top_rated")?"":wp.element.createElement(x,{label:S("Top Rated","vodi-extensions"),help:S("Check to select top rated posts.","vodi-extensions"),checked:b,onChange:this.onChangeTopRated}))}}t.ShortcodeAtts=s},{"./PostSelector":6,"./TermSelector":9}],9:[function(e,i,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TermSelector=void 0;var a=e("./ItemList"),n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};t=r(t);if(t&&t.has(e))return t.get(e);var s,n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(s in e){var i;"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&((i=o?Object.getOwnPropertyDescriptor(e,s):null)&&(i.get||i.set)?Object.defineProperty(n,s,i):n[s]=e[s])}n.default=e,t&&t.set(e,n);return n}(e("../utils/api")),o=e("../utils/useful-funcs");function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,s=new WeakMap;return(r=function(e){return e?s:t})(e)}const l=wp.i18n["__"],d=wp.components["Icon"];e=wp.element.Component;class s extends e{constructor(e){super(...arguments),this.props=e,this.state={terms:[],loading:!1,type:e.postType||"post",taxonomy:e.taxonomy||"category",taxonomies:[],filter:"",filterLoading:!1,filterTerms:[],initialLoading:!1},this.addTerm=this.addTerm.bind(this),this.removeTerm=this.removeTerm.bind(this),this.handleInputFilterChange=this.handleInputFilterChange.bind(this),this.doTermFilter=(0,o.debounce)(this.doTermFilter.bind(this),300)}componentDidMount(){this.setState({initialLoading:!0}),n.getTaxonomies({type:this.state.type}).then(e=>{this.setState({taxonomies:e},()=>{this.retrieveSelectedTerms().then(()=>{this.setState({initialLoading:!1})})})})}getTerms(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};const t=this.props["selectedTermIds"],s={...{per_page:10,type:this.state.type,taxonomy:this.state.taxonomy,search:this.state.filter},...e};return s.restBase=this.state.taxonomies[this.state.taxonomy].rest_base,n.getTerms(s).then(e=>(s.search?this.setState({filterTerms:e.filter(e=>{e=e.id;return-1===t.indexOf(e)})}):this.setState({terms:(0,o.uniqueById)([...this.state.terms,...e])}),e))}getSelectedTerms(){const t=this.props["selectedTermIds"];return this.state.terms.filter(e=>{e=e.id;return-1!==t.indexOf(e)}).sort((e,t)=>{e=this.props.selectedTermIds.indexOf(e.id),t=this.props.selectedTermIds.indexOf(t.id);return t<e?1:e<t?-1:0})}retrieveSelectedTerms(){var{termType:e,selectedTermIds:t}=this.props,{}=this.state;return t&&0<!t.length?new Promise(e=>e()):this.getTerms({include:this.props.selectedTermIds.join(","),per_page:100,termType:e})}addTerm(t){var e;this.state.filter&&(e=this.state.filterTerms.filter(e=>e.id===t),e=(0,o.uniqueById)([...this.state.terms,...e]),this.setState({terms:e})),this.props.updateSelectedTermIds([...this.props.selectedTermIds,t])}removeTerm(t){this.props.updateSelectedTermIds([...this.props.selectedTermIds].filter(e=>e!==t))}handleInputFilterChange(){let{target:{value:e=""}={}}=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.setState({filter:e},()=>{if(!e)return this.setState({filteredTerms:[],filtering:!1});this.doTermFilter()})}doTermFilter(){var{filter:e=""}=this.state;e&&(this.setState({filtering:!0,filterLoading:!0}),this.getTerms().then(()=>{this.setState({filterLoading:!1})}))}render(){var{title:e=l("Search Term","vodi")}=this.props,t=this.state.filtering,s=t&&!this.state.filterLoading?this.state.filterTerms:[],n=this.getSelectedTerms(),o=wp.element.createElement(d,{icon:"plus"}),i=wp.element.createElement(d,{icon:"minus"}),r="searchinput-"+Math.random().toString(36).substr(2,16);return wp.element.createElement("div",{className:"components-base-control components-term-selector"},wp.element.createElement("div",{className:"components-base-control__field--selected"},wp.element.createElement("h2",null,e),wp.element.createElement(a.ItemList,{items:n,loading:this.state.initialLoading,action:this.removeTerm,icon:i})),wp.element.createElement("div",{className:"components-base-control__field"},wp.element.createElement("label",{htmlFor:r,className:"components-base-control__label"},wp.element.createElement(d,{icon:"search"})),wp.element.createElement("input",{className:"components-text-control__input",id:r,type:"search",placeholder:l("Please enter your search query...","vodi-extensions"),value:this.state.filter,onChange:this.handleInputFilterChange}),wp.element.createElement(a.ItemList,{items:s,loading:this.state.initialLoading||this.state.loading||this.state.filterLoading,filtered:t,action:this.addTerm,icon:o})))}}t.TermSelector=s},{"../utils/api":10,"../utils/useful-funcs":11,"./ItemList":5}],10:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.getTerms=s.getTaxonomies=s.getPosts=s.getPostTypes=void 0;const n=wp["apiFetch"];s.getPostTypes=()=>n({path:"/wp/v2/types"}),s.getPosts=e=>{let{restBase:t=!1,...s}=e;e=`/wp/v2/${t}?${Object.keys(s).map(e=>e+"="+s[e]).join("&")}&_embed`;return n({path:e})},s.getTaxonomies=e=>{let{...t}=e;e=`/wp/v2/taxonomies?${Object.keys(t).map(e=>e+"="+t[e]).join("&")}&_embed`;return n({path:e})};s.getTerms=e=>{let{restBase:t=!1,...s}=e;e=`/wp/v2/${t}?${Object.keys(s).map(e=>e+"="+s[e]).join("&")}&_embed`;return n({path:e})}},{}],11:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.uniqueById=s.uniqueBy=s.debounce=void 0;const n=(e,t)=>{let s=[];return e.filter(e=>-1===s.indexOf(e[t])&&s.push(e[t]))};s.uniqueBy=n;s.uniqueById=e=>n(e,"id");s.debounce=(s,n)=>{let o=null;return function(){const e=this,t=arguments;clearTimeout(o),o=setTimeout(()=>{s.apply(e,t)},n)}}},{}]},{},[1]);
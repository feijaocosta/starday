!function s(i,o,a){function r(t,e){if(!o[t]){if(!i[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(l)return l(t,!0);throw(e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",e}n=o[t]={exports:{}},i[t][0].call(n.exports,function(e){return r(i[t][1][e]||e)},n,n.exports,s,i,o,a)}return o[t].exports}for(var l="function"==typeof require&&require,e=0;e<a.length;e++)r(a[e]);return r}({1:[function(e,n,s){"use strict";var a=e("../components/PostSelector"),r=e("../components/ImageUpload"),l=e("../components/DesignOptions");const p=wp.i18n["__"],t=wp.blocks["registerBlockType"],d=wp.editor["InspectorControls"],c=wp.element["Fragment"],{ServerSideRender:m,Disabled:g,PanelBody:h}=wp.components;t("vodi/section-featured-post",{title:p("Featured Post","vodi-extensions"),icon:"list-view",category:"vodi-blocks",edit:e=>{const{attributes:t,setAttributes:n}=e,{post_id:s,bg_image:i,design_options:o}=t;return wp.element.createElement(c,null,wp.element.createElement(d,null,wp.element.createElement(a.PostSelector,{postType:"post",selectSingle:!0,selectedPostIds:s,updateSelectedPostIds:e=>{n({post_id:e.join(",")})}}),wp.element.createElement(r.ImageUpload,{addImageLabel:p("Pick an Background Image","vodi-extensions"),replaceImageLabel:p("Replace Background Image","vodi-extensions"),removeImageLabel:p("Remove Background Image","vodi-extensions"),value:i,onSelect:e=>{n({bg_image:e.id})}}),wp.element.createElement(h,{title:p("Design Options","vodi-extensions"),initialOpen:!1},wp.element.createElement(l.DesignOptions,{attributes:{...o},updateDesignOptions:e=>{n({design_options:{...o,...e}})}}))),wp.element.createElement(g,null,s&&i?wp.element.createElement(m,{block:"vodi/section-featured-post",attributes:t}):s&&!i?p("Choose a Background Image","vodi-extensions"):p("Choose a Post","vodi-extensions")))},save(){return null}})},{"../components/DesignOptions":2,"../components/ImageUpload":3,"../components/PostSelector":6}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.DesignOptions=void 0;const a=wp.i18n["__"];var s=wp.element["Component"];const r=wp.components["RangeControl"];class i extends s{constructor(e){super(...arguments),this.props=e,this.onChangePaddingTop=this.onChangePaddingTop.bind(this),this.onChangePaddingBottom=this.onChangePaddingBottom.bind(this),this.onChangePaddingLeft=this.onChangePaddingLeft.bind(this),this.onChangePaddingRight=this.onChangePaddingRight.bind(this),this.onChangeMarginTop=this.onChangeMarginTop.bind(this),this.onChangeMarginBottom=this.onChangeMarginBottom.bind(this)}onChangePaddingTop(e){this.props.updateDesignOptions({padding_top:e})}onChangePaddingBottom(e){this.props.updateDesignOptions({padding_bottom:e})}onChangePaddingLeft(e){this.props.updateDesignOptions({padding_left:e})}onChangePaddingRight(e){this.props.updateDesignOptions({padding_right:e})}onChangeMarginTop(e){this.props.updateDesignOptions({margin_top:e})}onChangeMarginBottom(e){this.props.updateDesignOptions({margin_bottom:e})}render(){var e=this.props["attributes"],{padding_top:e,padding_bottom:t,padding_left:n,padding_right:s,margin_top:i,margin_bottom:o}=e;return wp.element.createElement("div",null,wp.element.createElement(r,{label:a("Padding Top (px)","vodi-extensions"),value:e,onChange:this.onChangePaddingTop,min:0,max:100}),wp.element.createElement(r,{label:a("Padding Bottom (px)","vodi-extensions"),value:t,onChange:this.onChangePaddingBottom,min:0,max:100}),wp.element.createElement(r,{label:a("Padding Left (px)","vodi-extensions"),value:n,onChange:this.onChangePaddingLeft,min:0,max:100}),wp.element.createElement(r,{label:a("Padding Right (px)","vodi-extensions"),value:s,onChange:this.onChangePaddingRight,min:0,max:100}),wp.element.createElement(r,{label:a("Margin Top (px)","vodi-extensions"),value:i,onChange:this.onChangeMarginTop,min:-100,max:100}),wp.element.createElement(r,{label:a("Margin Bottom (px)","vodi-extensions"),value:o,onChange:this.onChangeMarginBottom,min:-100,max:100}))}}n.DesignOptions=i},{}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ImageUpload=void 0;var{}=wp.i18n;const i=wp.editor["MediaUpload"];var s=wp.element["Component"];const o=wp.components["Button"];class a extends s{constructor(e){super(...arguments),this.props=e,this.onChangeImage=this.onChangeImage.bind(this),this.onRemoveImage=this.onRemoveImage.bind(this)}onChangeImage(e){this.props.onSelect(e)}onRemoveImage(){this.props.onSelect(0)}render(){const{addImageLabel:t,replaceImageLabel:n,removeImageLabel:e,value:s}=this.props;return wp.element.createElement("div",{className:"components-base-control components-image-upload"},wp.element.createElement("div",{className:"components-base-control__field"},wp.element.createElement(i,{onSelect:this.onChangeImage,type:"image",value:s,render:e=>{e=e.open;return wp.element.createElement("div",{className:"button-container"},wp.element.createElement(o,{isSecondary:!0,isLarge:!0,onClick:e,style:{marginBottom:".5rem"}},s?n:t))}})),s?wp.element.createElement("div",{className:"components-base-control__field"},wp.element.createElement("div",{className:"button-container"},wp.element.createElement(o,{isSecondary:!0,isLarge:!0,onClick:this.onRemoveImage,style:{marginBottom:".5rem"}},e))):"")}}n.ImageUpload=a},{}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Item=void 0;n.Item=e=>{let{title:{rendered:t}={},name:n,clickHandler:s,id:i,icon:o}=e;return wp.element.createElement("article",{className:"item"},wp.element.createElement("div",{className:"item-body"},wp.element.createElement("h3",{className:"item-title",style:{marginTop:"0"}},t,n)),wp.element.createElement("button",{onClick:()=>s(i)},o))}},{}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ItemList=void 0;var a=e("./Item");function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,s=arguments[t];for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const l=wp.i18n["__"];n.ItemList=e=>{const{filtered:t=!1,loading:n=!1,items:s=[],action:i=()=>{},icon:o=null}=e;return n?wp.element.createElement("p",{className:"loading-items"},l("Loading ...","vodi-extensions")):t&&s.length<1?wp.element.createElement("div",{className:"item-list"},wp.element.createElement("p",null,l("Your query yielded no results, please try again.","vodi-extensions"))):!s||s.length<1?wp.element.createElement("p",{className:"no-items"},l("Not found.","vodi-extensions")):wp.element.createElement("div",{className:"item-list"},s.map(e=>wp.element.createElement(a.Item,r({key:e.id},e,{clickHandler:i,icon:o}))))}},{"./Item":4}],6:[function(e,p,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PostSelector=void 0;var i=e("./ItemList"),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};t=a(t);if(t&&t.has(e))return t.get(e);var n,s={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var o;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((o=i?Object.getOwnPropertyDescriptor(e,n):null)&&(o.get||o.set)?Object.defineProperty(s,n,o):s[n]=e[n])}s.default=e,t&&t.set(e,s);return s}(e("../utils/api")),o=e("../utils/useful-funcs");function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(a=function(e){return e?n:t})(e)}const r=wp.i18n["__"],l=wp.components["Icon"];e=wp.element.Component;class n extends e{constructor(e){super(...arguments),this.props=e,this.state={posts:[],loading:!1,type:e.postType||"post",types:[],filter:"",filterLoading:!1,filterPosts:[],initialLoading:!1,selectedPosts:[]},this.addPost=this.addPost.bind(this),this.removePost=this.removePost.bind(this),this.handleInputFilterChange=this.handleInputFilterChange.bind(this),this.doPostFilter=(0,o.debounce)(this.doPostFilter.bind(this),300),this.getSelectedPostIds=this.getSelectedPostIds.bind(this),this.getSelectedPosts=this.getSelectedPosts.bind(this)}componentDidMount(){this.setState({initialLoading:!0}),s.getPostTypes().then(e=>{this.setState({types:e},()=>{this.retrieveSelectedPosts().then(e=>{e?this.setState({initialLoading:!1,selectedPosts:e}):this.setState({initialLoading:!1})})})})}getPosts(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};const t=this.getSelectedPostIds(),n={...{per_page:10,type:this.state.type,search:this.state.filter},...e};return n.restBase=this.state.types[this.state.type].rest_base,s.getPosts(n).then(e=>(n.search?this.setState({filterPosts:e.filter(e=>{e=e.id;return-1===t.indexOf(e)})}):this.setState({posts:(0,o.uniqueById)([...this.state.posts,...e])}),e))}getSelectedPostIds(){const e=this.props["selectedPostIds"];return e?Array.isArray(e)?e:e.split(","):[]}getSelectedPosts(n){const e=(0,o.uniqueById)([...this.state.filterPosts,...this.state.posts]);var t=e.filter(e=>{e=e.id;return-1!==n.indexOf(e)}).sort((e,t)=>{e=n.indexOf(e.id),t=n.indexOf(t.id);return t<e?1:e<t?-1:0});this.setState({selectedPosts:t})}retrieveSelectedPosts(){var e=this.props["postType"],{}=this.state,t=this.getSelectedPostIds().join(",");if(!t)return new Promise(e=>e());let n={include:t,per_page:100,postType:e};return this.props.postStatus&&(n.status=this.props.postStatus),this.getPosts({...n})}addPost(t){var e;this.state.filter&&(e=this.state.filterPosts.filter(e=>e.id===t),e=(0,o.uniqueById)([...this.state.posts,...e]),this.setState({posts:e})),this.props.selectSingle?(this.props.updateSelectedPostIds(e=[t]),this.getSelectedPosts(e)):(e=[...this.getSelectedPostIds(),t],this.props.updateSelectedPostIds(e),this.getSelectedPosts(e))}removePost(t){var e=[...this.getSelectedPostIds()].filter(e=>e!==t);this.props.updateSelectedPostIds(e),this.getSelectedPosts(e)}handleInputFilterChange(){let{target:{value:e=""}={}}=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.setState({filter:e},()=>{if(!e)return this.setState({filteredPosts:[],filtering:!1});this.doPostFilter()})}doPostFilter(){var{filter:e=""}=this.state;if(e){this.setState({filtering:!0,filterLoading:!0});let e={};this.props.postStatus&&(e.status=this.props.postStatus),this.getPosts({...e}).then(()=>{this.setState({filterLoading:!1})})}}render(){var e=this.state.filtering&&!this.state.filterLoading?this.state.filterPosts:[],t=wp.element.createElement(l,{icon:"plus"}),n=wp.element.createElement(l,{icon:"minus"}),s="searchinput-"+Math.random().toString(36).substr(2,16);return wp.element.createElement("div",{className:"components-base-control components-post-selector"},wp.element.createElement("div",{className:"components-base-control__field--selected"},wp.element.createElement("h2",null,r("Search Post","vodi-extensions")),wp.element.createElement(i.ItemList,{items:[...this.state.selectedPosts],loading:this.state.initialLoading,action:this.removePost,icon:n})),wp.element.createElement("div",{className:"components-base-control__field"},wp.element.createElement("label",{htmlFor:s,className:"components-base-control__label"},wp.element.createElement(l,{icon:"search"})),wp.element.createElement("input",{className:"components-text-control__input",id:s,type:"search",placeholder:r("Please enter your search query...","vodi-extensions"),value:this.state.filter,onChange:this.handleInputFilterChange}),wp.element.createElement(i.ItemList,{items:e,loading:this.state.initialLoading||this.state.loading||this.state.filterLoading,filtered:this.state.filtering,action:this.addPost,icon:t})))}}t.PostSelector=n},{"../utils/api":7,"../utils/useful-funcs":8,"./ItemList":5}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getTerms=n.getTaxonomies=n.getPosts=n.getPostTypes=void 0;const s=wp["apiFetch"];n.getPostTypes=()=>s({path:"/wp/v2/types"}),n.getPosts=e=>{let{restBase:t=!1,...n}=e;e=`/wp/v2/${t}?${Object.keys(n).map(e=>e+"="+n[e]).join("&")}&_embed`;return s({path:e})},n.getTaxonomies=e=>{let{...t}=e;e=`/wp/v2/taxonomies?${Object.keys(t).map(e=>e+"="+t[e]).join("&")}&_embed`;return s({path:e})};n.getTerms=e=>{let{restBase:t=!1,...n}=e;e=`/wp/v2/${t}?${Object.keys(n).map(e=>e+"="+n[e]).join("&")}&_embed`;return s({path:e})}},{}],8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.uniqueById=n.uniqueBy=n.debounce=void 0;const s=(e,t)=>{let n=[];return e.filter(e=>-1===n.indexOf(e[t])&&n.push(e[t]))};n.uniqueBy=s;n.uniqueById=e=>s(e,"id");n.debounce=(n,s)=>{let i=null;return function(){const e=this,t=arguments;clearTimeout(i),i=setTimeout(()=>{n.apply(e,t)},s)}}},{}]},{},[1]);